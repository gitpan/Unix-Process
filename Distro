#!/bin/sh
# $Id: Distro,v 1.2 2003/08/04 13:32:17 jettero Exp $

./distclean
perl Makefile.PL && make dist

mkdir -p dist

n=`ls Unix*gz`;
date=`date`;
cat Process.pm | pod2html > ./dist/Process.html
rm -vf pod* ./dist/Unix*gz
mv -v Unix*gz ./dist/

cat > ./dist/Process.b.html << EOF
<p>
I needed a way to get info about a process.  I wanted it to work under BSD and Linux.
Check out the man page: <a href="?eo_cat=Process.html">Unix::Process module</a> (<a href="$n">$n</a>).
<br><br>Changes:
EOF

echo -n '<pre>' >> ./dist/Process.b.html
perl -pe '$x++ if m/^\s*$/; exit if $x>2' Changes >> ./dist/Process.b.html
echo '</pre>' >> ./dist/Process.b.html

ssh mei.net "(cd /home/voltar/html/PerlModules/; rm *Process*)"
scp dist/* mei.net:/home/voltar/html/PerlModules/
ssh mei.net "(cd /home/voltar/html/PerlModules/; chmod 644 *.html *.gz)"

rm -rvf dist
